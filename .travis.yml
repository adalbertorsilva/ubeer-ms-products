language: node_js
services:
- postgresql
addons:
  code_climate:
      repo_token:
        secure: "CG/+ttySQ97W7R2TowIX6JHKkL1aQxQUQBcXAVkykCcoKWC+2iX7dG27W5dS4uwXvBgdJn+tL/49w5CqfPJOTDNQhjuFL8IsKbH6sLr4QuYMbbjg2lUpCllLxRBdWq4ELzWOe107YZ5L3SqoKxz2+89f++YBnOs+Kix69BO28eoTBWHRVnAJq+xiCk7R6OvZuKgn1/Hh/bwuwt5+atlUgN07nNmqm0gfaPH28ymOtOueoQr+dItNp4Eg8oiIUeCWYcxUGZIdqHT6S8txMSpiRkLsiS0G//YiUlTW6dBgWauZ9xYxmP5rt0szg6qXpdGyJrQHdwKux4AN3eVy9qq6lcGZTcX3h12DXwNyNJNFvmqdfWEgYm9st0epa2HqD+ARp1/Umhm3Ai0XpyIiSyzOdTxLbLe7kMJHI80Y2Qk/ReLFNK4t8cGazraZousvqWu0aMYF5dRhl3Mqc26NLaHEv31Lds6pCdq9EYz05yveSIcVYLJRrxZacTXIXrPERVyMPb4wJwKwKa8x+j911GOBrOmT9b6ckJhCxKHkTN22In2UixwnNU9XDaHfZ68tEWwnQeNKkL/VyCc4mTwTqTAzm2dBuEIlrCF4l3dcr3LHV/WDHRYd6wHiG595WpX/SpbcBv8kEWdvvr5DoQtwX4/mnXiu5p8oz/oFEUzdiG6Q0Yg="
before_script:
- npm install codeclimate-test-reporter -g
script:
- NODE_ENV=test npm run build:database
- npm test
after_script:
- codeclimate-test-reporter < ./coverage/lcov.info
env:
- secure: DPWcoY4pcyMhiUBqEdDlhs69RHfYvN9uJtjEW21tF0u0IBIdPGufbfdhO952GaLBEE7XsDvLKwjzmJv2EOTnC+3cZWhXLAgj3EL2ZOTLwcEJQ//OuDhSd6h3cwKM/32pFWO09LEXC4Q2/6Kn4DbHnYs6nRndD0LvutpR1brLX+lUQXx+AHV8V4I9zbCuVDhCCAmm5siHNKZmgHHslrHXaS5i8A6ys5Q5V7At69U//Fg7IDWUnIf1LZo2viWogFGhyEkO4Pv4rk1NVRiYNsF9EH+ZrUlRE++N3U6AAzgLIqDjiz0TtLCII0WfQSuzqOCjAozBp2XG/3PbtrAMzytcO9AGQ93hcnZqEK4cdXJQj7qybJ2erGYaL2kKG0bxvZv7GGuZqhHx4sSq6KmsLcbAN9b33MSvWjxoL9JCbxYioCFgPsKYAbz8MCOSJa/e9L/JgEGkJ2xOL7OW/pfG3ta36Pqgj3F/S5RIyyhbsZY5sZuFZuywFXIhdKA97Nc4cx8wxkzuVHN5Q3/jZDYfshIbop+UL9BJD3fLhGBcNilFqzvb5PPY4lCcYQsxozo9lNwuJliYRW19xs8aBl+FAyVC6wIXN5FNWb6ynARbTD5b7I/3fWgXhP1TaB3wsjfa1SCSivkKegfa72/Tpx3j5B4CaAu0SjUSD2mQ2XK8avHik1U=
deploy:
  provider: heroku
  skip_cleanup: true
  api_key:
    secure: "cH+PIfm6iqUbgmlV/pyZDunAxYBwRIcBa5pRoxN9RvnKgyYCl0oNj0pGqHcPA9W7QZ6qhKCP5m76i/uzBSzgmDbxE54flgSunT6q7zb/F9b5QZufRi5ZR61P19/ai2rAOJnG3Cg81/IQcagVbRex7pMaaOH0nQxdXtrJghQdjb6b18bANPsAkgPFJeTPIMY/mw5im1EJyLZpA9LK0SmmOsLvEo47TcW/AOdTmwp5du1f1NJrnKzN9MS2nJHzVx+GPu51QzHviZMtvSj6Bw0AkPpq6MOpQlsG/7jrd41+tpWsJArzUxqUWRi2/mbJDDCf8O7zPhU40RDcnPwXtjigbzt+2dnzlKoVvmgLvTCmiI2FtUWlFtINwUzRJ5RSsc5OtaP60mUPmnBsdR1LWiemZx2gCLy+lTqQp1fjNy6Mm0HNH01U9KbELcDjiRW5Myhx3UrMziM2OBGpdwklMDBx1lK5YvWHLy5DklSHw+SVkfoT1UB+qoftjopNJBqZfwrwomCFuu0Kuyvg8hcGZXdIdt3wIzCQGwoxrXimIYbQBhIfTjbS1YI/mQxbbwalpPqseFwdEdvgwRjPhxdpd6me8tjc/vyDC2NvmbvE63zXtLT9K9ecyKv7TSTjCsxItbf7tVpwATZuqwgQRdA7NpbsHH3uzvr2HR/phVPd5fsEnzg="
